# Internationalization (i18n) - Documentation

Ce projet utilise **i18next** avec **react-i18next** et **expo-localization** pour gérer les traductions.

## Structure des fichiers

```
lang/
├── index.ts                      # Configuration i18next
└── locales/
    ├── en-US/
    │   └── translation.json      # Traductions anglaises
    └── fr-FR/
        └── translation.json      # Traductions françaises
```

## Dépendances

```json
{
  "i18next": "^25.7.3",
  "react-i18next": "^16.5.1",
  "expo-localization": "^17.0.8"
}
```

## Configuration

### Fichier principal (`lang/index.ts`)

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import { getLocales } from 'expo-localization';

import en from './locales/en-US/translation.json';
import fr from './locales/fr-FR/translation.json';

const resources = {
  en: { translation: en },
  fr: { translation: fr },
};

// Détecte automatiquement la langue du device
const deviceLanguage = getLocales()[0]?.languageCode ?? 'en';

i18n.use(initReactI18next).init({
  resources,
  lng: deviceLanguage,
  fallbackLng: 'en',
  interpolation: {
    escapeValue: false,
  },
});

export default i18n;
```

### Initialisation dans l'app (`app/_layout.tsx`)

```typescript
import '../lang'; // Initialise i18n au démarrage
```

## Utilisation

### Hook `useTranslation`

```typescript
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t, i18n } = useTranslation();

  return (
    <View>
      {/* Traduction simple */}
      <Text>{t('home.welcome')}</Text>

      {/* Traduction avec interpolation */}
      <Text>{t('home.itemCount', { count: 5 })}</Text>

      {/* Langue actuelle */}
      <Text>Langue: {i18n.language}</Text>
    </View>
  );
}
```

### Changer la langue

```typescript
const { i18n } = useTranslation();

// Changer vers le français
i18n.changeLanguage('fr');

// Changer vers l'anglais
i18n.changeLanguage('en');

// Toggle entre les langues
const toggleLanguage = () => {
  const newLang = i18n.language === 'en' ? 'fr' : 'en';
  i18n.changeLanguage(newLang);
};
```

## Format des fichiers de traduction

### Structure recommandée

```json
{
  "namespace": {
    "key": "Valeur traduite",
    "keyWithVariable": "Texte avec {{variable}}"
  }
}
```

### Exemple (`lang/locales/en-US/translation.json`)

```json
{
  "home": {
    "welcome": "Welcome back",
    "itemCount": "You have {{count}} items"
  },
  "profile": {
    "title": "Your Profile",
    "editButton": "Edit"
  }
}
```

### Exemple (`lang/locales/fr-FR/translation.json`)

```json
{
  "home": {
    "welcome": "Bienvenue",
    "itemCount": "Vous avez {{count}} items"
  },
  "profile": {
    "title": "Votre profil",
    "editButton": "Modifier"
  }
}
```

## Ajouter une nouvelle langue

1. Créer un nouveau dossier dans `lang/locales/` (ex: `es-ES/`)
2. Ajouter le fichier `translation.json`
3. Importer et ajouter dans `lang/index.ts`:

```typescript
import es from './locales/es-ES/translation.json';

const resources = {
  en: { translation: en },
  fr: { translation: fr },
  es: { translation: es }, // Nouvelle langue
};
```

## Pluralisation

i18next supporte la pluralisation automatique:

```json
{
  "item": "{{count}} item",
  "item_plural": "{{count}} items"
}
```

```typescript
t('item', { count: 1 }); // "1 item"
t('item', { count: 5 }); // "5 items"
```

## Bonnes pratiques

1. **Organiser par namespace**: Grouper les traductions par page/fonctionnalité
2. **Clés descriptives**: Utiliser des clés qui décrivent le contexte (`home.welcome` vs `text1`)
3. **Fallback**: Toujours définir une `fallbackLng` pour les traductions manquantes
4. **Variables**: Préférer l'interpolation (`{{name}}`) aux concaténations
5. **Pas de HTML**: Éviter le HTML dans les traductions pour React Native

## Ressources

- [Documentation i18next](https://www.i18next.com/)
- [Documentation react-i18next](https://react.i18next.com/)
- [Documentation expo-localization](https://docs.expo.dev/versions/latest/sdk/localization/)
